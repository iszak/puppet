---
classes:
    - apache::mod::rewrite

project::zf2:
    crowdwish_backend:
        require:
            - Package[php5-curl]
            - Package[php5-intl]
            - Package[php5-pgsql]

        user: crowdwish
        owner: crowdwish
        group: crowdwish

        repo_path: public/crowdwish-backend
        repo_source: git@git.kdigital.net:crowdwish/backend.git

        web_path: web/public
        web_host: api.crowdwish.dev

        composer_path: web

        database_name: crowdwish_production
        database_username: crowdwish_production
        database_password: md5554957fbfe164e6308e0a8dd09725ffe


exec:
    crowdwish_backend_domain:
        require: Project::zf2[crowdwish_backend]
        command: /bin/sed -i 's/example\.com/crowdwish\.dev/' *local.php
        cwd: /home/vagrant/public/crowdwish-backend/web/config/autoload/

package:
    php5-curl:
        ensure: latest

    php5-intl:
        ensure: latest

    php5-pgsql:
        ensure: latest
